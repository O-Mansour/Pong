upstream 1vs1-local {
    server 1vs1-local:80;
}

server {
    listen 3000;
    server_name localhost;
    
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    location / {
        root /usr/share/nginx/html;
        index index.html;
        try_files $uri /index.html;

        # Disable caching with HTTP headers
        add_header Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0";
        add_header Pragma "no-cache";
        add_header Expires 0;
    }

    # location / {
    #     proxy_pass http://1vs1-local;
    # }
    location /gamed/ {
        proxy_pass http://1vs1-local;
    }
    location /gamed/1vs1-local/src {
        proxy_pass http://1vs1-local/src;
    }
    location /gamed/1vs1-local/assets {
        proxy_pass http://1vs1-local/assets;
    }
}
